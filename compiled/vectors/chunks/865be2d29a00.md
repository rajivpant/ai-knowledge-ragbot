ge knowledge bases may need trimming

## Gemini Gems setup

### Creating a Gem

1. Go to https://gemini.google.com/gems
2. Create new Gem
3. Paste instructions from `compiled/gemini-projects/instructions/{name}.md`

### Knowledge files

1. Upload files from `compiled/gemini-projects/knowledge/`
2. Gemini limits: max 10 files
3. The compiler bundles content to stay within limits

### Gemini-specific optimizations

- Instructions formatted for Gemini's style preferences
- Knowledge bundled to minimize file count
- Token counts optimized for Gemini's context window

## Inheritance and personalized compilation

### Baseline vs personalized

- **Baseline**: Compile a repo standalone (`ragbot compile --project example-client`)
- **Personalized**: Include inherited content (`ragbot compile --project example-client --personalized`)

Personalized compilation:
1. Resolves inheritance chain (example-client → example-company → personal → ragbot)
2. Merges content from all ancestors
3. Outputs to `compiled/projects/{project}/` for the requesting user

### When to use each

| Use Case | Approach |
|----------|----------|
| Shared team project | Baseline compilation |
| Personal Claude project | Personalized compilation |
| Client workspace | Baseline (client-specific content only) |
| Advisory work with personal identity | Personalized |

## Context-filtered outputs

### Available contexts

Contexts are defined in `source/contexts/` as YAML files:

```yaml
# writing-mode.yaml
name: Writing Mode
include:
  instructions:
    - identity.md
    - voice-and-style.md
  runbooks:
    - writing/**
    - content-creation/**
exclude:
  - runbooks/coding/**
token_budget: 80000
```

### Using context outputs

For a writing-focused Claude project:
1. Use standard instructions
2. Upload content from `compiled/knowledge/by-context/writing-mode/`
3. This excludes coding runbooks, engineering content

## Updating projects

### When to recompile

Recompile when:
- Source content changes
- Inheritance relationships change
- New contexts added
- Token budget adjustments needed

### Update workflow

```bash
# Recompile single project
ragbot compile --project {name}

# Recompile all projects
ragbot compile --all

# Force recompile (ignore cache)
ragbot compile --project {name} --force
```

### After recompilation

1. Update custom instructions in LLM project
2. Re-upload knowledge files (or trigger GitHub sync)
3. Verify token counts in manifest.yaml

## Troubleshooting

### "Instructions too long"

- Use context filtering to reduce scope
- Move detailed content to knowledge files
- Check manifest.yaml for token counts

### "Knowledge not being used"

- Verify files uploaded correctly
- Check if content is in instructions vs knowledge
- For Claude: ensure GitHub sync is active

### "Inheritance not working"

- Verify `my-projects.yaml` exists in personal repo
- Check inheritance chain: `inherits_from` in compile-config.yaml
- Run with `--verbose` to see inheritance resolution

### "Stale content"

- Use `--force` flag to ignore cache
- Check compile timestamps in manifest.yaml
- Verify source files are saved before compiling
